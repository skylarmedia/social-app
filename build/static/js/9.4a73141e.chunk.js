(this["webpackJsonpskylar-social"]=this["webpackJsonpskylar-social"]||[]).push([[9],{743:function(e,t,a){},753:function(e,t,a){"use strict";a.r(t);var n=a(24),l=a(61),s=a(9),r=a(10),c=a(29),o=a(12),i=a(11),m=a(0),u=a.n(m),d=a(14),h=a(34),b=a(17),p=a.n(b),C=a(730),f=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).closeDelete=function(e,t){n.setState({open:!1},(function(){n.props.confirmDelete(e,t,n.props.index)}))},n.showModal=function(){n.setState({open:!0})},n.handleCancel=function(){n.setState({open:!1})},n.state={open:!1},n}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.logo,n=t.name,l=t.clientId,s={backgroundImage:"url(".concat(a,")")};return u.a.createElement("div",{className:""},u.a.createElement("div",{style:s,className:"bg-image"},u.a.createElement(C.a,{visible:this.state.open,maskStyle:{backgroundColor:"rgba(0,0,0,9.5)"},onCancel:this.handleCancel,wrapClassName:"modal-wrapper message-modal",footer:[u.a.createElement("div",null,u.a.createElement("button",{type:"button",onClick:this.handleCancel,className:"red-btn delete-btn-main"},"CANCEL"),u.a.createElement("button",{type:"button",className:"red-border-btn delete-btn-main",onClick:function(){return e.closeDelete(l,n)}},"DELETE"))]},u.a.createElement("div",{className:"inner-btn"},u.a.createElement("h6",{className:"f-20 color-blue text-center"},"Delete Client?"),u.a.createElement("p",{className:"color-blue text-center"},"Are you sure you would like to delete this client? This action is permanent and cannot be un-done."))),u.a.createElement("button",{className:"clear-btn top-delete color-blue f-16",onClick:function(){return e.showModal()},type:"button"},"x")),u.a.createElement("p",{className:"text-center mt-5px mb-10"},n))}}]),a}(m.Component),E=a(341),g=a(729),v=(a(743),a(171)),w=a(340),N=function(e){var t=e.client,a=e.getClient,n=e.index,l=Object(m.useState)(!1),s=Object(v.a)(l,2),r=s[0],c=s[1];function o(e){a(t,e,t.uid,n),c(!1)}return u.a.createElement("div",{className:"d-flex flex-column align-items-start"},u.a.createElement("button",{type:"button",onClick:function(){return c(!0)},className:"clear-btn p-0 mb-10 p-blue"},u.a.createElement("u",null,t.displayName)),u.a.createElement(w.a,{content:u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{type:"button",onClick:function(){return o("password")},className:"clear-btn d-block"},"Change Password"),u.a.createElement("button",{type:"button",onClick:function(){return o("username")},className:"clear-btn d-block"},"Change Username")),trigger:"click",visible:r,onVisibleChange:function(){return c(!1)}}))},S=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).confirmArchive=function(e){"true"===e.target.value&&(n.props.firebase.deleteClient(n.state.deleteClient),n.setState({clients:n.state.clients.filter((function(e,t){return t!==n.state.deleteIndex}))})),n.setState({showDelete:!n.state.showDelete})},n.reactivateClient=function(e,t){n.props.firebase.reactivateClient(e),n.setState({clients:n.state.clients.filter((function(e,a){return a!==t}))})},n.getClientParent=function(e,t,a){"password"===t?n.setState({chosenClient:e,passwordModal:!0}):n.setState({chosenClient:a,usernameModal:!0})},n.deleteClient=function(e,t){n.setState({deleteClient:e,deleteIndex:t})},n.submitDeletion=function(){if("DELETE"===n.state.username){var e=n.functions.httpsCallable("deleteByUid"),t={};t.uid=localStorage.getItem("tempDeleteUserId"),t.name=localStorage.getItem("tempDeleteUser"),e(t),n.setState({visible:!1,username:"",clients:n.state.clients.filter((function(e,t){return t!==parseInt(localStorage.getItem("tempIndex"))}))}),E.a.success("Client deleted")}else E.a.error("Please type DELETE to delete client")},n.handleCancel=function(e){n.setState({visible:!1})},n.showModal=function(){n.setState({visible:!0})},n.confirmDeleteParent=function(e,t,a){localStorage.setItem("tempDeleteUser",t),localStorage.setItem("tempDeleteUserId",e),localStorage.setItem("tempIndex",a),n.setState({visible:!0})},n.handlePasswordCancel=function(){n.setState({passwordModal:!1})},n.onChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.changePassword=function(e){e.preventDefault();var t=n.functions.httpsCallable("changeClientPassword"),a={};a.uid=n.state.chosenClient,a.password=n.state.mainPassword,t(a),n.setState({passwordModal:!1})},n.handleUsernameCancel=function(){n.setState({usernameModal:!1})},n.changeUser=function(e){e.preventDefault();var t=n.functions.httpsCallable("changeUsername"),a={};a.uid=n.state.chosenClient,a.username=n.state.username,a.oldUsername=n.state.chosenClient.name,t(a),n.setState({usernameModal:!1,allClients:[]},(function(){n.functions.httpsCallable("GetAuthUsers")().then((function(e){n.setState({allClients:e.data.users})}))}))},n.state={clients:[],visible:!1,deleteClient:"",deleteIndex:null,modalState:!1,email:"",password:"",error:null,allClients:[],chosenClient:{},passwordModal:!1,mainPassword:"",passwordTwo:"",username:""},n.reactivateClient=n.reactivateClient.bind(Object(c.a)(n)),n.deleteClient=n.deleteClient.bind(Object(c.a)(n)),n.confirmArchive=n.confirmArchive.bind(Object(c.a)(n)),n.auth=p.a.auth(),n.functions=p.a.functions(),n.db=p.a.firestore(),n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.functions.httpsCallable("GetAuthUsers")().then((function(t){e.setState({allClients:t.data.users})})),this.props.firebase.getArchivedClients().then((function(t){var a=Object(n.a)(e.state.clients);t.docs.filter((function(t){return a.push(t.data()),e.setState({clients:a})}))}))}},{key:"render",value:function(){var e=this,t=""===this.state.chosenClient.name;return u.a.createElement("div",null,u.a.createElement(C.a,{visible:this.state.usernameModal,onCancel:this.handleUsernameCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},u.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),u.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),u.a.createElement(g.a,{name:"username",value:this.state.username,onChange:this.onChange,type:"text",placeholder:"New Username",className:"mb-10 blue-input m-320"}),u.a.createElement("button",{type:"button",className:"mt-20",onClick:this.changeUser,disabled:t},"Change Username")),u.a.createElement(C.a,{visible:this.state.passwordModal,onCancel:this.handlePasswordCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},u.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),u.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),u.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.email),u.a.createElement(g.a,{name:"mainPassword",value:this.state.mainPassword,onChange:this.onChange,type:"text",placeholder:"PASSWORD",className:"mb-10 blue-input m-320"}),u.a.createElement(g.a,{name:"passwordTwo",value:this.state.passwordTwo,onChange:this.onChange,type:"text",placeholder:"VERIFY PASSWORD",className:"mb-10 blue-input m-320"}),u.a.createElement("button",{type:"button",onClick:this.changePassword},"Change Password")),u.a.createElement(C.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,wrapClassName:"message-modal",footer:[u.a.createElement("div",null,u.a.createElement("button",{type:"button",onClick:this.handleCancel,className:"red-btn delete-btn-main"},"CANCEL"),u.a.createElement("button",{type:"button",className:"red-border-btn delete-btn-main",onClick:this.submitDeletion},"DELETE"))]},u.a.createElement("div",null,u.a.createElement("h6",{className:"f-20 color-blue text-center"},"Delete Client?"),u.a.createElement("p",{className:"color-blue text-center"},"To delete this client permanently please enter 'DELETE'"),localStorage.getItem("tempDeleteUser"),u.a.createElement(g.a,{name:"username",value:this.state.username,onChange:this.onChange,type:"text",className:"mb-10 blue-input m-320"}),this.state.error&&u.a.createElement("span",{className:"color-red"},this.state.error))),u.a.createElement("h4",{className:"text-center f-20 mb-20 p-blue mt-35"},"Settings"),u.a.createElement("div",{className:"row container mx-auto"},u.a.createElement("div",{className:"col-md-12"},u.a.createElement("h2",{className:"p-blue"},"Edit Client Info"),u.a.createElement("p",{className:"p-blue"},"Select a client below to re-set their username and/or password."),this.state.allClients.map((function(t,a){return u.a.createElement(N,{client:t,getClient:e.getClientParent,key:a,index:a,className:"col-md-6"})})))),u.a.createElement("h4",{className:"text-center f-20 mb-20 mt-35"},"Archived Clients"),u.a.createElement("div",{className:"row container mx-auto settings-client"},this.state.clients.map((function(t,a){return u.a.createElement("div",{className:"col-sm-3",key:a},u.a.createElement(f,{name:t.name,logo:t.logo,clientId:t.uid,modalState:e.state.modalState,className:"w-100",confirmDelete:e.confirmDeleteParent,index:a}),u.a.createElement("button",{onClick:function(){return e.reactivateClient(t.name,a)},className:"clear-btn text-center color-blue w-100",type:"button"},u.a.createElement("u",null,"Reactivate Client")))}))))}}]),a}(m.Component);t.default=Object(h.a)(Object(d.c)(S))}}]);
//# sourceMappingURL=9.4a73141e.chunk.js.map