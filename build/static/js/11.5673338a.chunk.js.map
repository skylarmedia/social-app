{"version":3,"sources":["components/AssignCategories/index.js"],"names":["AssignCategories","props","_this","Object","_Users_edwardlanto_Desktop_social_app_deploy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_Users_edwardlanto_Desktop_social_app_deploy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_edwardlanto_Desktop_social_app_deploy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","handleChange","name","color","i","categoriesNew","_Users_edwardlanto_Desktop_social_app_deploy_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","state","categories","selected","months","concat","parseInt","match","params","month","setState","db","collection","doc","id","update","dirty","firebase","firestore","_this2","get","then","snapshot","tempNum","size","tempArr","Array","docs","map","item","push","data","console","log","length","_this3","style","background","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","antd__WEBPACK_IMPORTED_MODULE_9__","checked","onChange","value","for","onSubmit","selectCategories","react_router_dom__WEBPACK_IMPORTED_MODULE_11__","to","year","Component","compose","withFirebase"],"mappings":"yNAOMA,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAkCRQ,aAAe,SAACC,EAAMC,EAAOC,GAC3B,IAAIC,EAAaV,OAAAW,EAAA,EAAAX,CAAOD,EAAKa,MAAMC,YACnCH,EAAcD,GAAGK,UAAYJ,EAAcD,GAAGK,SAC9CJ,EAAcD,GAAGM,OAAjB,GAAAC,OAAAhB,OAAAW,EAAA,EAAAX,CAA8BD,EAAKa,MAAMC,WAAWJ,GAAGM,QAAvD,CAA+DE,SAASlB,EAAKD,MAAMoB,MAAMC,OAAOC,SAChGrB,EAAKsB,SAAS,CACZR,WAAWH,IAGbX,EAAKuB,GACFC,WAAW,SACXC,IAAIzB,EAAKD,MAAMoB,MAAMC,OAAOM,IAC5BF,WAAW,cACXC,IAAIjB,GACJmB,OAAO,CACNZ,SAAUJ,EAAcD,GAAGK,SAC3BC,OAAQL,EAAcD,GAAGM,UA/C7BhB,EAAKa,MAAQ,CACXC,WAAY,GACZc,OAAO,GAIT5B,EAAKuB,GAAKM,IAASC,YATF9B,mFAYC,IAAA+B,EAAA5B,KACVuB,EAAOvB,KAAKJ,MAAMoB,MAAMC,OAAxBM,GAERvB,KAAKoB,GACFC,WAAW,SACXC,IAAIC,GACJF,WAAW,cACXQ,MACAC,KAAK,SAAAC,GACJ,IAAMC,EAAUD,EAASE,KACnBC,EAAU,IAAIC,MACpBJ,EAASK,KAAKC,IAAI,SAAAC,GAChBJ,EAAQK,KAAKD,EAAKE,QAClBC,QAAQC,IAAIV,EAASE,GACjBF,GAAWE,EAAQS,QACrBf,EAAKT,SACH,CACER,WAAYuB,yCAwDjB,IAAAU,EAAA5C,KACPyC,QAAQC,IAAI1C,KAAKU,MAAMC,WAAY,cACnC8B,QAAQC,IAAI1C,KAAKJ,MAAO,cACxB,IAAIe,EAAaX,KAAKU,MAAMC,WAAW0B,IAAI,SAACC,EAAM/B,GAChD,IAAIsC,EAAQ,CACVC,WAAYR,EAAKhC,OAEnB,OACEyC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kDACbH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CACEC,QAASR,EAAKlC,MAAMC,WAAWJ,GAAGK,SAClCyC,SAAU,kBAAMT,EAAKxC,aAAakC,EAAKjC,KAAMiC,EAAKhC,MAAOC,IACzD+C,MAAOhB,EAAKjC,KACZkB,GAAIe,EAAKjC,OAEX0C,EAAAC,EAAAC,cAAA,SAAOJ,MAAOA,EAAOK,UAAU,mCAAmCK,IAAKjB,EAAKjC,MACzEiC,EAAKjC,SAMd,OACE0C,EAAAC,EAAAC,cAAA,OAAK1B,GAAG,6BACNwB,EAAAC,EAAAC,cAAA,QACEO,SAAUxD,KAAKyD,iBACfP,UAAU,2EAEVH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,UAAd,cACClD,KAAKU,MAAMC,WAAWgC,OAAS,GAAKhC,EACrCoC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6CACfH,EAAAC,EAAAC,cAACS,EAAA,EAAD,CAAMR,UAAU,6FAA6FS,GAAE,aAAA7C,OAAed,KAAKJ,MAAMoB,MAAMC,OAAO2C,KAAvC,KAAA9C,OAA+Cd,KAAKJ,MAAMoB,MAAMC,OAAOC,MAAvE,KAAAJ,OAAgFd,KAAKJ,MAAMoB,MAAMC,OAAOM,KAAvN,kBArHqBsC,aA6HhBC,sBAAQC,YAAapE","file":"static/js/11.5673338a.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { withFirebase } from '../Firebase';\nimport { compose } from 'redux';\nimport { Checkbox } from 'antd';\nimport firebase from 'firebase';\nimport { Link } from 'react-router-dom';\n\nclass AssignCategories extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      categories: [],\n      dirty: false\n    };\n\n    // this.handleChange = this.handleChange.bind(this);\n    this.db = firebase.firestore();\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n\n    this.db\n      .collection('users')\n      .doc(id)\n      .collection('categories')\n      .get()\n      .then(snapshot => {\n        const tempNum = snapshot.size;\n        const tempArr = new Array();\n        snapshot.docs.map(item => {\n          tempArr.push(item.data());\n          console.log(tempNum, tempArr);\n          if (tempNum == tempArr.length)\n            this.setState(\n              {\n                categories: tempArr\n              });\n        });\n      });\n  }\n\n  handleChange = (name, color, i) => {\n    let categoriesNew = [...this.state.categories];\n    categoriesNew[i].selected = !categoriesNew[i].selected;\n    categoriesNew[i].months = [...this.state.categories[i].months, parseInt(this.props.match.params.month)]\n    this.setState({\n      categories:categoriesNew\n    })\n\n    this.db\n      .collection('users')\n      .doc(this.props.match.params.id)\n      .collection('categories')\n      .doc(name)\n      .update({\n        selected: categoriesNew[i].selected,\n        months: categoriesNew[i].months\n      });\n  \n  };\n\n  // handleChange = i => {\n  //   let categories = [...this.state.categories];\n  //   categories[i].selected = !categories[i].selected;\n  //   // console.log('cats', categories);\n  //   // console.log('HANDLE CHANGE', [\n  //   //   ...this.state.categories[i].month,\n  //   //   parseInt(this.props.match.params.month)\n  //   // ]);\n\n  //   // categories[i].month = [\n  //   //   ...this.state.categories[i].month,\n  //   //   parseInt(this.props.match.params.month)\n  //   // ];\n\n  //   this.setState(\n  //     {\n  //       categories: categories\n  //     });\n  // };'\n\n  // isValid(selected, months) {\n  //   console.log('this months', months, this.props.match.params.month)\n  //   if(selected === true && months.includes(this.props.match.params.month)){\n  //     return true;\n  //   }else{\n  //     return false;\n  //   }\n  // }\n\n\n  render() {\n    console.log(this.state.categories, 'CATEGORISE');\n    console.log(this.props, 'categories');\n    let categories = this.state.categories.map((item, i) => {\n      let style = {\n        background: item.color\n      };\n      return (\n        <div className=\"d-flex assign-cat justify-content-center mb-10\">\n          <Checkbox\n            checked={this.state.categories[i].selected}\n            onChange={() => this.handleChange(item.name, item.color, i)}\n            value={item.name}\n            id={item.name}\n          />\n          <label style={style} className=\"align-self-center col-md-3 ml-10\" for={item.name}>\n            {item.name}\n          </label>\n        </div>\n      );\n    });\n\n    return (\n      <div id=\"assign-categories-wrapper\">\n        <form\n          onSubmit={this.selectCategories}\n          className=\"col-sm-6 d-flex flex-column mx-auto bg-white form-cat position-relative\"\n        >\n          <h5 className=\"cat-h5\">Categories</h5>\n          {this.state.categories.length > 0 && categories}\n          <div className=\"text-center d-flex justify-content-center\">\n          <Link className=\"align-items-center save-draft-btn submit-cat d-flex justify-content-center color-red fw-16\" to={`/calendar/${this.props.match.params.year}/${this.props.match.params.month}/${this.props.match.params.id}`}>SAVE</Link>\n          </div>\n         </form>\n      </div>\n    );\n  }\n}\n\nexport default compose(withFirebase(AssignCategories));\n"],"sourceRoot":""}