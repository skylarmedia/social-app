{"version":3,"sources":["components/AssignCategories/index.js"],"names":["AssignCategories","props","handleChange","name","color","i","categoriesNew","state","categories","selected","months","parseInt","match","params","month","setState","db","collection","doc","id","update","message","success","dirty","firebase","firestore","this","get","then","snapshot","tempArr","docs","map","item","push","data","style","background","className","checked","onChange","value","for","onSubmit","selectCategories","length","size","to","year","Component","withFirebase"],"mappings":"sPAMMA,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA6BRC,aAAe,SAACC,EAAMC,EAAOC,GAC3B,IAAIC,EAAa,YAAO,EAAKC,MAAMC,YACnCF,EAAcD,GAAGI,UAAYH,EAAcD,GAAGI,SAC9CH,EAAcD,GAAGK,OAAjB,sBACK,EAAKH,MAAMC,WAAWH,GAAGK,QAD9B,CAEEC,SAAS,EAAKV,MAAMW,MAAMC,OAAOC,SAEnC,EAAKC,SAAS,CACZP,WAAYF,IAGd,EAAKU,GACFC,WAAW,SACXC,IAAI,EAAKjB,MAAMW,MAAMC,OAAOM,IAC5BF,WAAW,cACXC,IAAIf,GACJiB,OAAO,CACNX,SAAUH,EAAcD,GAAGI,SAC3BC,OAAQJ,EAAcD,GAAGK,SAG3BW,IAAQC,QAAR,UAAmBnB,EAAnB,wBAhDF,EAAKI,MAAQ,CACXC,WAAY,GACZe,OAAO,GAGT,EAAKP,GAAKQ,IAASC,YARF,E,gEAWE,IAAD,OACVN,EAAOO,KAAKzB,MAAMW,MAAMC,OAAxBM,GACRO,KAAKV,GACFC,WAAW,SACXC,IAAIC,GACJF,WAAW,cACXU,MACAC,MAAK,SAAAC,GACJ,IAAMC,EAAU,GAChBD,EAASE,KAAKC,KAAI,SAAAC,GAKhB,OAJAH,EAAQI,KAAKD,EAAKE,QAClB,EAAKpB,SAAS,CACZP,WAAYsB,IAEP,a,+BA6BL,IAAD,OACHtB,EAAakB,KAAKnB,MAAMC,WAAWwB,KAAI,SAACC,EAAM5B,GAChD,IAAI+B,EAAQ,CACVC,WAAYJ,EAAK7B,OAEnB,OACE,yBAAKkC,UAAU,kDACb,kBAAC,IAAD,CACEC,QAAS,EAAKhC,MAAMC,WAAWH,GAAGI,SAClC+B,SAAU,kBAAM,EAAKtC,aAAa+B,EAAK9B,KAAM8B,EAAK7B,MAAOC,IACzDoC,MAAOR,EAAK9B,KACZgB,GAAIc,EAAK9B,OAEX,2BAAOiC,MAAOA,EAAOE,UAAU,mCAAmCI,IAAKT,EAAK9B,MACzE8B,EAAK9B,UAMd,OACE,yBAAKgB,GAAG,6BACN,0BACEwB,SAAUjB,KAAKkB,iBACfN,UAAU,2EAEV,wBAAIA,UAAU,UAAd,cACCZ,KAAKnB,MAAMC,WAAWqC,OAAS,EAAIrC,EAAa,yBAAK8B,UAAU,qBAAoB,kBAAC,IAAD,CAAMQ,KAAK,WAC/F,yBAAKR,UAAU,6CACb,kBAAC,IAAD,CACES,GAAE,oBAAerB,KAAKzB,MAAMW,MAAMC,OAAOmC,KAAvC,YAA+CtB,KAAKzB,MAAMW,MAAMC,OAAOC,MAAvE,YAAgFY,KAAKzB,MAAMW,MAAMC,OAAOM,KAE1G,4BAAQmB,UAAU,YAAlB,mB,GAvFiBW,aAgGhBC,sBAAalD","file":"static/js/10.2c3f46a3.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { withFirebase } from '../Firebase';\nimport { Checkbox, message, Spin } from 'antd';\nimport firebase from 'firebase';\nimport { Link } from 'react-router-dom';\n\nclass AssignCategories extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      categories: [],\n      dirty: false\n    };\n\n    this.db = firebase.firestore();\n  }\n\n  componentDidMount() {\n    const { id } = this.props.match.params;\n    this.db\n      .collection('users')\n      .doc(id)\n      .collection('categories')\n      .get()\n      .then(snapshot => {\n        const tempArr = [];\n        snapshot.docs.map(item => {\n          tempArr.push(item.data());\n          this.setState({\n            categories: tempArr\n          });\n          return null;\n        });\n      });\n  }\n\n  handleChange = (name, color, i) => {\n    let categoriesNew = [...this.state.categories];\n    categoriesNew[i].selected = !categoriesNew[i].selected;\n    categoriesNew[i].months = [\n      ...this.state.categories[i].months,\n      parseInt(this.props.match.params.month)\n    ];\n    this.setState({\n      categories: categoriesNew\n    });\n\n    this.db\n      .collection('users')\n      .doc(this.props.match.params.id)\n      .collection('categories')\n      .doc(name)\n      .update({\n        selected: categoriesNew[i].selected,\n        months: categoriesNew[i].months\n      });\n\n      message.success(`${name} Succesfully Added`);\n  };\n\n  render() {\n    let categories = this.state.categories.map((item, i) => {\n      let style = {\n        background: item.color\n      };\n      return (\n        <div className=\"d-flex assign-cat justify-content-center mb-10\">\n          <Checkbox\n            checked={this.state.categories[i].selected}\n            onChange={() => this.handleChange(item.name, item.color, i)}\n            value={item.name}\n            id={item.name}\n          />\n          <label style={style} className=\"align-self-center col-md-3 ml-10\" for={item.name}>\n            {item.name}\n          </label>\n        </div>\n      );\n    });\n\n    return (\n      <div id=\"assign-categories-wrapper\">\n        <form\n          onSubmit={this.selectCategories}\n          className=\"col-sm-6 d-flex flex-column mx-auto bg-white form-cat position-relative\"\n        >\n          <h5 className=\"cat-h5\">Categories</h5>\n          {this.state.categories.length > 0 ? categories : <div className=\"text-center mt-20\"><Spin size=\"large\" /></div>}\n          <div className=\"text-center d-flex justify-content-center\">\n            <Link\n              to={`/calendar/${this.props.match.params.year}/${this.props.match.params.month}/${this.props.match.params.id}`}\n            >\n              <strong className=\"colour-p\">Go Back</strong>\n            </Link>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default withFirebase(AssignCategories);\n"],"sourceRoot":""}