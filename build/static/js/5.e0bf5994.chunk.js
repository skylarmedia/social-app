(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{746:function(e,t,a){},747:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAZCAYAAAAv3j5gAAAAAXNSR0IArs4c6QAAAnRJREFUSA2tVkty00AQ7R4KFmRBdAJ8A7wMWZkqQrGLcwNzAnwDnBNgTgBHcHZUoCpiE7LDOQHiAtgs7Eo5WM3rkWYkWZIlk6hKNT09Pf3m87p7mBq+2cuDHpkHxyTUhWmXmPbtFKGQSCJiDmm1OAvC6XybK64bnB0dDuD0HRF36my8XmhOLGNaLT/UAZaAZr3uPj18fIGV6g52+xRQ1ifB16twc2IBCLuAcwZIejyb1m37Im+CL5ef8uYeKNnJ3s87g3jv8Ulw/n3iusYJ9GgvvD8QeBXzcfb6oOP8WyB78UTPnPJeWj3+2Lx3vtyORk5RbuVURP6U9U6zbZz7NjxgamavnvfBsKduWrGV0+D8coSL7FWC6aXruMT94rxcj40dw44SITeUicJvlYlg0LQEljLLkoizI8ompxLTsUqGRDqpqtxYmvOFB7tdqu015lj6tos57qgd/z46nDPzkzLKhmYjNtqBpD7i9QvTCkTtmQt0RTiMd8kepvKSS5tR1iEAP19Ffmi1GEK+9v0GweCSp9tsdCFKBI1yvSv8P/APbPJcLXqY2wz292ZqsP2oDsiDgHUKkuRBRqnAMbYFE/mliwK940kdEDONldoZCKLdfXmweD106orW+sepEMFRhFXWBe2IhIf1eVC2j4NxWjYc0ECPo2I1d1TJGTJHX53YXJfWjuZL3QHWstnE/khdUiXU/ep8toPzvCmzDPLh4IGUGUrjNnGVd1gp22SbFT21sXeUN7apRYvgf9QnGw7I5I1vhgKgvoKIRvVszKwtAEIBr6Bx61dQNj2RbOFKakpX8K7zuVHkGxYRIZOHdLuc1AE4f/8AzlcnPS+oe7sAAAAASUVORK5CYII="},749:function(e,t,a){"use strict";var s=a(10),n=a(12),o=a(14),c=a(13),r=a(15),l=a(0),i=a.n(l),d=a(16),p=a(40),m=a(739),u=m.a.Option,h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).currentCategory=function(e){console.log("E",e);var t=e.split("|||")[1],s=e.split("|||")[0];a.props.getSelectedCategory(t,s)},a.state={categories:[],selectedCategory:""},a}return Object(r.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.getUserCategories(this.props.clientId,parseInt(this.props.month)).then(function(t){var a=[];t.docs.map(function(e,t){var s={};s.color=e.data().color,s.name=e.data().name,a.push(s)}),e.setState({categories:a})})}},{key:"render",value:function(){var e=this.state.categories.map(function(e,t){return console.log("item",e),i.a.createElement("option",{value:"".concat(e.name,"|||").concat(e.color),key:t},e.name)}),t={backgroundColor:this.props.color};return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{className:"main-edit-form",style:t},i.a.createElement(m.a,{name:"options",style:{width:120},onChange:this.currentCategory.bind(this),placeholder:this.props.currentCat?this.props.currentCat:"Category",suffixIcon:i.a.createElement("img",{src:a(114)})},this.props.currentCat?i.a.createElement(u,{value:"".concat(this.props.currentCat," ||| #fff"),selected:!0},this.props.currentCat):i.a.createElement(u,{value:"No Category ||| #fff",selected:!0},"No Category"),e)))}}]),t}(l.Component);t.a=Object(p.a)(Object(d.c)(h))},756:function(e,t,a){},768:function(e,t,a){"use strict";a.r(t);var s=a(33),n=a(24),o=a(10),c=a(12),r=a(14),l=a(13),i=a(34),d=a(15),p=a(0),m=a.n(p),u=a(749),h=a(256),g=a(176),b=(a(756),a(741)),f=a(743),v=a(174),E=a(173),C=a.n(E),y=a(328),k=a(18),w=a.n(k),N=(a(746),a(16)),x=a(770),I=a(736),A=a(79),S=a(25),O=a.n(S),j=a(136),M=(a(171),a(745)),D=a(737),P=b.a.TextArea,T=x.a.Panel,Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(l.a)(t).call(this,e))).handlePostMedium=function(e){var t=e.target.getAttribute("index"),s=Object(n.a)(a.state.posts);s[t].postMedium=e.target.value,a.setState({posts:s})},a.handleVisibleChange=function(e){a.setState({visible:e})},a.handleHashTags=function(e){var t=e.target.getAttribute("index"),s=Object(n.a)(a.state.posts);s[t].postHashTag=e.target.value,a.setState({posts:s})},a.handleTitle=function(e){var t=e.target.getAttribute("index"),s=Object(n.a)(a.state.posts);s[t].title=e.target.value,a.setState({posts:s})},a.handleCopy=function(e){var t=e.target.getAttribute("index"),s=Object(n.a)(a.state.posts);s[t].copy=e.target.value,a.setState({posts:s})},a.getNumberOfMessages=function(){a.props.firebase.countClientMessages(a.props.match.params.clientId,a.state.currentMonth,a.state.currentYear).then(function(e){console.log("snapshot in months",e),e.docs.map(function(e){console.log("item month data",e.data())})})},a.unsubscribe=function(){return a.db.collection("chats").doc(a.props.match.params.postId).collection("messages").where("postId","==",a.props.match.params.clientId).onSnapshot(function(e){var t=Object(n.a)(a.state.messages);e.docChanges().forEach(function(e){"added"===e.type&&(t.push(e.doc.data()),a.setState({messages:t}))})})},a.deletePostParent=function(e){a.setState({messages:a.state.messages.filter(function(t,a){return a!==e})})},a.submitEdits=function(){a.props.firebase.updatePost(a.props.match.params.postId,a.props.match.params.clientId,a.state.posts,a.state.approved),a.props.history.goBack()},a.handleFacebook=function(e){var t=e.target.index,s=Object(n.a)(a.state.posts);s[t].facebook=!s[t].facebook,a.setState({posts:s})},a.handleInstagram=function(e){var t=e.target.index,s=Object(n.a)(a.state.posts);s[t].instagram=!s[t].instagram,a.setState({posts:s})},a.handleTwitter=function(e){var t=e.target.index,s=Object(n.a)(a.state.posts);s[t].twitter=!s[t].twitter,a.setState({posts:s})},a.handleLinkedin=function(e){var t=e.target.index,s=Object(n.a)(a.state.posts);s[t].linkedin=!s[t].linkedin,a.setState({posts:s})},a.handleApproval=function(e){a.setState({approved:!a.state.approved})},a.handleOther=function(e){var t=e.target.index,s=Object(n.a)(a.state.posts);s[t].other=!s[t].other,a.setState({posts:s})},a.handleAd=function(e){var t=e.target.index,s=Object(n.a)(a.state.posts);s[t].ad=!s[t].ad,a.setState({posts:s})},a.handleComplete=function(e){var t=Object(n.a)(a.state.posts);t[e].postTime=a.state.currentTime,a.setState({posts:t})},a.handlePostTime=function(e,t){a.setState({currentTime:t})},a.toggleChat=function(){a.state.updatedMessages,a.setState({showChat:!a.state.showChat})},a.submitMessage=function(e){e.preventDefault()},a.handleBudget=function(e){console.log("event",e)},a.captureKey=function(e){"Enter"===e.key&&(e.preventDefault(),a.props.firebase.adminSendMessage(!0,w()(new Date).format("DD/MM/YYYY"),a.formatAMPM(new Date),a.props.match.params.postId,a.state.message,a.props.match.params.clientId,w()().unix(),a.state.currentMonth,a.state.currentYear),a.setState({message:""})),a.props.firebase.updateClientNotification(a.props.match.params.postId,a.props.match.params.clientId)},a.handleAd=function(e){var t=e.target.index,s=Object(n.a)(a.state.posts);s[t].ad=!s[t].ad,a.setState({posts:s})},a.addEmoji=function(e){if(e.unified.length<=5){var t=String.fromCodePoint("0x".concat(e.unified));a.setState({message:a.state.message+t})}else{var s=e.unified.split("-"),n=[];s.forEach(function(e){return n.push("0x"+e)});var o=String.fromCodePoint.apply(String,n);a.setState({message:a.state.message+o})}},a.getSelectedCategoryParent=function(e,t){a.setState({selectedCategory:e,selectedCategoryName:t})},a.setMessage=function(e){e.preventDefault(),a.setState({message:e.target.value})},a.formatAMPM=function(e){var t=e.getHours(),a=e.getMinutes(),s=t>=12?"pm":"am";return(t=(t%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+s},a.clearMessages=function(e,t){var s=a.functions.httpsCallable("clearClientMessages"),n=new Object;n.id=e,n.postId=a.state.postId,s(n),a.setState({messages:[]})},a.toggleIcon=function(e){a.setState({showIcons:!a.state.showIcons})},a.saveDraft=function(){a.db.collection("users").doc(a.props.match.params.postId).collection("posts").doc(a.props.match.params.clientId).update({draft:!0}).then(function(){a.props.history.push("/calendar/".concat(a.state.currentYear,"/").concat(a.state.currentMonth,"/").concat(a.props.match.params.postId))})},a.deletePost=function(){a.db.collection("users").doc(a.props.match.params.postId).collection("posts").doc(a.props.match.params.clientId).delete().then(function(){a.props.history.push("/calendar/".concat(a.state.currentYear,"/").concat(a.state.currentMonth,"/").concat(a.props.match.params.postId))})},a.state={posts:[],currentTime:null,approved:!1,showChat:!1,showIcons:!0,message:"",messages:[],currentMonth:null,currentYear:null,updatedMessages:!1,postId:null,selectedCategory:null,selectedCategoryName:null,visible:!1,color:null},a.handleFacebook=a.handleFacebook.bind(Object(i.a)(a)),a.handleComplete=a.handleComplete.bind(Object(i.a)(a)),a.handlePostMedium=a.handlePostMedium.bind(Object(i.a)(a)),a.handleAd=a.handleAd.bind(Object(i.a)(a)),a.handleHashTags=a.handleHashTags.bind(Object(i.a)(a)),a.submitEdits=a.submitEdits.bind(Object(i.a)(a)),a.handleCopy=a.handleCopy.bind(Object(i.a)(a)),a.setMessage=a.setMessage.bind(Object(i.a)(a)),a.handleBudget=a.handleBudget.bind(Object(i.a)(a)),a.db=O.a.firestore(),a.functions=O.a.functions(),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("props in edit post",this.props);var t=this.functions.httpsCallable("updateAdminMessages"),a=(this.props.match.params.id,new Object);a.postId=this.props.match.params.clientId,a.userId=this.props.match.params.postId,t(a),this.props.firebase.editPostFirebase(this.props.match.params.clientId,this.props.match.params.postId).then(function(t){0===e.state.posts.length&&e.setState({posts:t.data().post,selectedCategoryName:t.data().selectedCategoryName,approved:t.data().approved,currentMonth:t.data().month,currentYear:t.data().year,postId:t.id,color:t.data().color})}),this.unsubscribe()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"handleStartDpChange",value:function(e,t){var a=Object(n.a)(this.state.posts);a[t].budgetStart=w()(e).format("MM/DD/YYYY"),this.setState({posts:a})}},{key:"handleEndDpChange",value:function(e,t){var a=Object(n.a)(this.state.posts);a[t].budgetEnd=w()(e).format("MM/DD/YYYY"),this.setState({posts:a})}},{key:"handleLinks",value:function(e){console.log("i handle links",e)}},{key:"createUI",value:function(){var e=this;return this.state.values.map(function(t,a){return m.a.createElement("div",{key:a},m.a.createElement("input",{type:"text",value:t.value||"",onChange:e.handleLinks.bind(e,a)}),m.a.createElement("input",{type:"button",value:"remove",onClick:e.removeClick.bind(e,a)}))})}},{key:"removeClick",value:function(e){var t=Object(n.a)(this.state.values);t.splice(e,1),this.setState({values:t})}},{key:"addClick",value:function(e){console.log("STATE in ad form",e);var t=Object(n.a)(this.state.posts);t[e].values=t[e].values}},{key:"render",value:function(){var e=this;console.log("selected category",this.state.selectedCategory),console.log("this state edit",this.state);var t=this.state.posts.map(function(t,n){var o;return m.a.createElement("div",{className:"edit-form-main-wrapper",key:n},m.a.createElement(M.a,{className:"container d-flex row mx-auto p-0",gutter:30},m.a.createElement(D.a,{span:12},m.a.createElement(b.a,{className:"outlined-title blue-input",label:"Post Title",name:"title",index:n,value:e.state.posts[n].title,onChange:e.handleTitle,margin:"normal"}),m.a.createElement("div",null,e.state.posts[n].images.length>0?m.a.createElement(j.a,{imageSrc:e.state.posts[n].images,className:"upload-files-wrapper"}):m.a.createElement("div",{id:"red-outline-wrapper",className:"w-100 mb-20"},m.a.createElement("div",{className:"red-center"},m.a.createElement("input",{type:"file",multiple:!0,onChange:e.addFile,className:"red-dashed-input"})))),m.a.createElement(P,{className:"blue-input copy-input",placeholder:"Copy",name:"copy",value:e.state.posts[n].copy,onChange:e.handleCopy,margin:"normal",variant:"outlined",index:n})),m.a.createElement(D.a,{span:12},m.a.createElement("div",{className:"d-flex justify-content-between mb-20 edit-social-icons"},m.a.createElement("div",null,m.a.createElement(f.a,{type:"checkbox",name:"facebook",value:e.state.posts[n].facebook,checked:e.state.posts[n].facebook,onChange:e.handleFacebook,index:n,id:"facebook-".concat(n)}),m.a.createElement("label",{for:"facebook-".concat(n)},"Facebook")),m.a.createElement("div",null,m.a.createElement(f.a,{type:"checkbox",name:"instagram",value:e.state.posts[n].instagram,checked:e.state.posts[n].instagram,onChange:e.handleInstagram,index:n,id:"instagram-".concat(n)}),m.a.createElement("label",{for:"instagram-".concat(n)},"Instagram")),m.a.createElement("div",null,m.a.createElement(f.a,{type:"checkbox",name:"twitter",value:e.state.posts[n].twitter,checked:e.state.posts[n].twitter,onChange:e.handleTwitter,index:n,id:"twitter-".concat(n)}),m.a.createElement("label",{for:"twitter-".concat(n)},"Twitter")),m.a.createElement("div",null,m.a.createElement(f.a,{type:"checkbox",name:"linkedin",value:e.state.posts[n].linkedin,checked:e.state.posts[n].linkedin,onChange:e.handleLinkedin,index:n,id:"linkedin-".concat(n)}),m.a.createElement("label",{for:"linkedin-".concat(n)},"LinkedIn")),m.a.createElement("div",null,m.a.createElement(f.a,{type:"checkbox",name:"other",value:e.state.posts[n].other,checked:e.state.posts[n].other,onChange:e.handleOther,index:n,id:"other-".concat(n)}),m.a.createElement("label",{id:"other-".concat(n)},"Other"))),m.a.createElement("div",{className:"date-button-wrapper d-flex row justify-content-between"},m.a.createElement("div",{id:"choose-date-wrapper",className:"col-sm-4"},m.a.createElement(x.a,{className:"post-collapse"},m.a.createElement(T,{header:"POST DATE",extra:m.a.createElement("img",{src:a(114)}),showArrow:!1},m.a.createElement(C.a,{selected:e.state.dpDate,placeholderText:"Post Date",onChange:function(t){return e.handleDPChange(t)},customInput:m.a.createElement(v.a,{ipDate:e.state.posts[n].ipDate,placeholderText:"Post Date",handleIpChange:function(t){return e.handleIpChange(t,n)}}),dateFormat:"MM/dd/yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select"})))),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement(y.a,{index:n,onOpenChange:function(){return e.handleComplete(n)},onChange:e.handlePostTime,placeholder:"POST TIME",defaultValue:w()("".concat(e.state.posts[n].postTime),"HH:mm:ss")})),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement(b.a,{type:"text",placeholder:"POST MEDIUM",name:"postMedium",className:"blue-input",value:e.state.posts[n].postMedium,onChange:e.handlePostMedium,index:n}))),m.a.createElement("div",{className:"mt-20 edit-ad"},m.a.createElement("div",{className:"sponsored-label"},m.a.createElement(f.a,{checked:e.state.posts[n].ad,onChange:e.handleAd,id:"ad-".concat(n),index:n}),m.a.createElement("label",{className:"color-blue ad-edit",for:"ad-".concat(n)},"Ad or Sponsored Post")),e.state.posts[n].ad&&m.a.createElement("div",{className:"col-md-12 row mt-20 mb-20"},m.a.createElement("div",{className:" d-flex justify-content-between date-picker-wrapper flex-85 align-items-center inner-form-wrapper2 "},m.a.createElement(C.a,{selected:new Date(e.state.posts[n].budgetStart),placeholderText:"Post Date",onChange:function(t){return e.handleStartDpChange(t,n)},dateFormat:"MM/dd/yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"select-edit"}),m.a.createElement("span",null,"-"),m.a.createElement(C.a,{selected:new Date(e.state.posts[n].budgetEnd),placeholderText:"Post Date",onChange:function(t){return e.handleEndDpChange(t,n)},dateFormat:"MM/dd/yyyy",showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",className:"select-edit"})),m.a.createElement("div",{className:"d-flex flex-85 align-items-center mt-20"},m.a.createElement("label",{className:"budget-text"},"Budget"),m.a.createElement("input",{type:"text",value:e.state.posts[n].budget,placeholder:"$0.00",name:"budget",className:"budget-input",onChange:e.handleBudget,index:n})))),m.a.createElement("div",null,m.a.createElement(P,{placeholder:"Hashtags",value:e.state.posts[n].postHashTag,name:"postHashTag",onChange:e.handleHashTags,index:n,className:"blue-input"})),m.a.createElement("div",null,e.state.posts[n].values.map(function(t,s){return m.a.createElement("div",{key:s},m.a.createElement("div",{className:"d-flex align-self-center ant-link"},m.a.createElement(b.a,{className:"blue-input",placeholder:"ADD LINKS",name:"link-".concat(s),value:t.value||"",onChange:function(t){return e.handleLinks(t)},margin:"normal",variant:"outlined",index:s}),s===e.state.posts[n].values.length-1?m.a.createElement("button",{type:"button",onClick:function(){return e.addClick(n)},className:"clear-btn"},m.a.createElement("img",{src:a(344)})):m.a.createElement("button",{type:"button",onClick:function(){return e.removeClick(s)},className:"clear-btn"},m.a.createElement("img",{src:a(747)}))))}))),m.a.createElement(M.a,{className:"edit-btn-wrapper",gutter:10},m.a.createElement(D.a,null,m.a.createElement("button",{onClick:e.saveDraft,className:"save-draft-btn color-red"},"SAVE DRAFT")),m.a.createElement(D.a,null,m.a.createElement("button",{onClick:e.submitEdits,className:"add-date-btn"},"SAVE")),m.a.createElement(D.a,{span:24,className:"mt-30 text-center"},m.a.createElement("button",(o={type:"button",className:"p-blue"},Object(s.a)(o,"className","clear-btn"),Object(s.a)(o,"onClick",e.deletePost),o),m.a.createElement("u",null,"Delete Post"))))))}),n=m.a.createElement("button",{type:"button",className:"clear-btn d-flex",onClick:function(){return e.clearMessages(e.props.match.params.postId,e.props.match.params.clientId)}},m.a.createElement("i",{className:"fas fa-trash"}),m.a.createElement("span",{className:"ml-10"},"CLEAR"));return m.a.createElement("div",{className:"add-post edit-post"},m.a.createElement("p",{className:"heading text-center add-post-heading p-blue"},"Client ",this.props.match.params.clientId," Calendar",m.a.createElement("br",null)),m.a.createElement("div",{className:""},m.a.createElement("div",{className:"d-flex approval-wrapper"},m.a.createElement("div",{className:"container d-flex align-items-center"},m.a.createElement(u.a,{clientId:this.props.match.params.postId,getSelectedCategory:this.getSelectedCategoryParent,category:this.state.selectedCategory,currentCat:this.state.selectedCategoryName,color:this.state.color}),m.a.createElement(f.a,{name:"approved",value:this.state.approved,onChange:this.handleApproval,checked:this.state.approved,id:"approvePost"}),m.a.createElement("label",{className:"color-blue m-0",for:"approvePost"},"APPROVE POST"))),t),m.a.createElement("div",{className:"fixed-bottom container position_relative col-md-4"},this.state.showChat&&m.a.createElement("div",null,m.a.createElement("div",{className:"d-flex flex-column align-items-end"},m.a.createElement("div",{className:"inner-chat-log bg-white position-relative"},m.a.createElement(g.a,{deletePost:this.deletePostParent,adminClient:this.props.match.params.postId,messages:this.state.messages}),m.a.createElement("form",{onSubmit:this.submitMessage,className:"d-flex mt-30 position-relative"},m.a.createElement("textarea",{onChange:this.setMessage,value:this.state.message,onKeyDown:this.captureKey}),m.a.createElement(I.a,{placement:"topRight",content:n,trigger:"click",className:"position-absolute",visible:this.state.visible,onVisibleChange:this.handleVisibleChange},m.a.createElement(A.a,{className:"clear-btn clear-message-button position-absolute send-clear"},m.a.createElement("i",{className:"fas fa-ellipsis-v"})))),m.a.createElement("button",{type:"button",onClick:this.toggleIcon.bind(this),className:"clear-btn position-absolute happy-btn"},m.a.createElement("i",{className:"fas fa-smile-beam"}))),m.a.createElement("span",{className:this.state.showIcons?"hidden":"not-hidden"},m.a.createElement(h.a,{onSelect:this.addEmoji})))),m.a.createElement("button",{onClick:this.toggleChat,type:"button",className:"clear-btn"},m.a.createElement("img",{src:a(348)}))))}}]),t}(p.Component);t.default=Object(N.c)(Y)}}]);
//# sourceMappingURL=5.e0bf5994.chunk.js.map