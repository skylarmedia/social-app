(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{757:function(e,t,a){},758:function(e,t,a){},771:function(e,t,a){"use strict";a.r(t);var n=a(23),l=a(30),s=a(11),c=a(12),r=a(14),o=a(13),i=a(34),m=a(15),u=a(0),d=a.n(u),b=a(16),h=a(50),p=a(740),C=a(24),f=a.n(C),g=a(741),E=(a(757),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).closeDelete=function(e,t){a.setState({open:!1},function(){a.props.confirmDelete(e,t,a.props.index)})},a.showModal=function(){a.setState({open:!0})},a.handleCancel=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.logo,n=t.name,s=t.clientId,c=(t.index,{backgroundImage:"url(".concat(a,")")});return d.a.createElement("div",{className:""},d.a.createElement("div",{style:c,className:"bg-image"},d.a.createElement(g.a,{visible:this.state.open,maskStyle:{backgroundColor:"rgba(0,0,0,9.5)"},onCancel:this.handleCancel,wrapClassName:"modal-wrapper message-modal",footer:[d.a.createElement("div",null,d.a.createElement("button",Object(l.a)({type:"button",onClick:this.handleCancel,className:"red-btn delete-btn-main"},"type","button"),"CANCEL"),d.a.createElement("button",{type:"button",className:"red-border-btn delete-btn-main",onClick:function(){return e.closeDelete(s,n)}},"DELETE"))]},d.a.createElement("div",{className:"inner-btn"},d.a.createElement("h6",{className:"f-20 color-blue text-center"},"Delete Client?"),d.a.createElement("p",{className:"color-blue text-center"},"Are you sure you would like to delete this client? This action is permanent and cannot be un-done."))),d.a.createElement("button",{className:"clear-btn top-delete color-blue f-16",onClick:function(){return e.showModal()},type:"button"},"x")),d.a.createElement("p",{className:"text-center mt-5px mb-10"},n))}}]),t}(u.Component)),w=(a(758),a(177)),v=a(344),N=function(e){var t=e.client,a=e.getClient,n=Object(u.useState)(!1),l=Object(w.a)(n,2),s=l[0],c=l[1];function r(e){a(t,e),c(!1)}return console.log("clients",t),d.a.createElement("div",{className:"d-flex flex-column align-items-start"},d.a.createElement("button",{type:"button",onClick:function(){return c(!0)},className:"clear-btn p-0 mb-10 p-blue"},d.a.createElement("u",null,t.name)),d.a.createElement(v.a,{content:d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"button",onClick:function(){return r("password")},className:"clear-btn d-block"},"Change Password"),d.a.createElement("button",{type:"button",onClick:function(){return r("username")},className:"clear-btn d-block"},"Change Username")),trigger:"click",visible:s,onVisibleChange:function(){return c(!1)}}))},S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).confirmArchive=function(e){"true"==e.target.value&&(a.props.firebase.deleteClient(a.state.deleteClient),a.setState({clients:a.state.clients.filter(function(e,t){return t!==a.state.deleteIndex})})),a.setState({showDelete:!a.state.showDelete})},a.reactivateClient=function(e,t){a.props.firebase.reactivateClient(e),a.setState({clients:a.state.clients.filter(function(e,a){return a!==t})})},a.getClientParent=function(e,t){"password"===t?a.setState({chosenClient:e,passwordModal:!0}):a.setState({chosenClient:e,usernameModal:!0})},a.deleteClient=function(e,t){a.setState({deleteClient:e,deleteIndex:t})},a.submitDeletion=function(){var e=a.auth;if(console.log(a.state.username),a.state.password===localStorage.getItem("key")&&e.currentUser.email===a.state.username){var t=a.functions.httpsCallable("deleteByUid"),n=new Object;n.uid=localStorage.getItem("tempDeleteUserId"),n.name=localStorage.getItem("tempDeleteUser"),t(n).then(function(e){console.log("response: ".concat(e))}),a.setState({visible:!1,clients:a.state.clients.filter(function(e,t){return t!==parseInt(localStorage.getItem("tempIndex"))})})}else a.setState({error:"Sorry there was an error with your submission"})},a.handleCancel=function(e){a.setState({visible:!1})},a.showModal=function(){a.setState({visible:!0})},a.confirmDeleteParent=function(e,t,n){localStorage.setItem("tempDeleteUser",t),localStorage.setItem("tempDeleteUserId",e),localStorage.setItem("tempIndex",n),a.setState({visible:!0})},a.handlePasswordCancel=function(){a.setState({passwordModal:!1})},a.onChange=function(e){a.setState(Object(l.a)({},e.target.name,e.target.value))},a.changePassword=function(e){e.preventDefault();var t=a.functions.httpsCallable("changeClientPassword"),n=new Object;n.uid=a.state.chosenClient.uid,n.password=a.state.mainPassword,t(n),a.setState({passwordModal:!1})},a.handleUsernameCancel=function(){a.setState({usernameModal:!1})},a.changeUser=function(e){e.preventDefault();var t=a.functions.httpsCallable("changeUsername"),n=new Object;n.uid=a.state.chosenClient.uid,n.username=a.state.username,n.oldUsername=a.state.chosenClient.name,t(n),a.setState({usernameModal:!1})},a.state={clients:[],visible:!1,deleteClient:"",deleteIndex:null,modalState:!1,email:"",password:"",error:null,allClients:[],chosenClient:{},passwordModal:!1,mainPassword:"",passwordTwo:"",username:""},a.reactivateClient=a.reactivateClient.bind(Object(i.a)(a)),a.deleteClient=a.deleteClient.bind(Object(i.a)(a)),a.confirmArchive=a.confirmArchive.bind(Object(i.a)(a)),a.auth=f.a.auth(),a.functions=f.a.functions(),a.db=f.a.firestore(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.db.collection("users").get().then(function(t){var a=Object(n.a)(e.state.allClients);t.docs.map(function(e){a.push(e.data())}),e.setState({allClients:a})}),this.props.firebase.getArchivedClients().then(function(t){var a=Object(n.a)(e.state.clients);t.docs.filter(function(t){a.push(t.data()),e.setState({clients:a})})})}},{key:"render",value:function(){var e=this;console.log("client uid",this.state);return d.a.createElement("div",null,d.a.createElement(g.a,{visible:this.state.usernameModal,onCancel:this.handleUsernameCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},d.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),d.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),d.a.createElement(p.a,{name:"username",value:this.state.username,onChange:this.onChange,type:"text",placeholder:"New Username",className:"mb-10 blue-input m-320"}),d.a.createElement("button",{type:"button",className:"add-date-btn mt-20",onClick:this.changeUser},"Change Username")),d.a.createElement(g.a,{visible:this.state.passwordModal,onCancel:this.handlePasswordCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},d.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),d.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),d.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.email),d.a.createElement(p.a,{name:"mainPassword",value:this.state.mainPassword,onChange:this.onChange,type:"text",placeholder:"PASSWORD",className:"mb-10 blue-input m-320"}),d.a.createElement(p.a,{name:"passwordTwo",value:this.state.passwordTwo,onChange:this.onChange,type:"text",placeholder:"VERIFY PASSWORD",className:"mb-10 blue-input m-320"}),d.a.createElement("button",{type:"button",onClick:this.changePassword,className:"clear-btn add-date-btn"},"Change Password")),d.a.createElement(g.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,wrapClassName:"message-modal",footer:[d.a.createElement("div",null,d.a.createElement("button",Object(l.a)({type:"button",onClick:this.handleCancel,className:"red-btn delete-btn-main"},"type","button"),"CANCEL"),d.a.createElement("button",{type:"button",className:"red-border-btn delete-btn-main",onClick:this.submitDeletion},"DELETE"))]},d.a.createElement("div",null,d.a.createElement("h6",{className:"f-20 color-blue text-center"},"Delete Client?"),d.a.createElement("p",{className:"color-blue text-center"},"To delete this client permanently please enter your credentials. Remember this action cannot be un-done."),d.a.createElement(p.a,{name:"username",value:this.state.username,onChange:this.onChange,type:"text",placeholder:"EMAIL",className:"mb-10 blue-input m-320"}),d.a.createElement(p.a,{name:"password",value:this.state.password,onChange:this.onChange,type:"password",className:"mb-10 blue-input m-320",placeholder:"PASSWORD"}),this.state.error&&d.a.createElement("span",{className:"color-red"},this.state.error))),d.a.createElement("h4",{className:"text-center f-20 mb-20 p-blue mt-35"},"Settings"),d.a.createElement("div",{className:"row container mx-auto"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("h2",{className:"p-blue"},"Edit Client Info"),d.a.createElement("p",{className:"p-blue"},"Select a client below to re-set their username and/or password."),this.state.allClients.map(function(t,a){return d.a.createElement(N,{client:t,getClient:e.getClientParent,key:a})}))),d.a.createElement("h4",{className:"text-center f-20 mb-20 mt-35"},"Archived Clients"),d.a.createElement("div",{className:"row container mx-auto settings-client"},this.state.clients.map(function(t,a){return d.a.createElement("div",{className:"col-sm-3",key:a},d.a.createElement(E,{name:t.name,logo:t.logo,clientId:t.uid,modalState:e.state.modalState,className:"w-100",confirmDelete:e.confirmDeleteParent,index:a}),d.a.createElement("button",{onClick:function(){return e.reactivateClient(t.name,a)},className:"clear-btn text-center color-blue w-100",type:"button"},d.a.createElement("u",null,"Reactivate Client")))})))}}]),t}(u.Component);t.default=Object(h.a)(Object(b.c)(S))}}]);
//# sourceMappingURL=8.60cbbd68.chunk.js.map