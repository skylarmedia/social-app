(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{764:function(e,t,a){},775:function(e,t,a){"use strict";a.r(t);var n=a(24),l=a(65),s=a(9),c=a(11),r=a(13),o=a(12),i=a(30),m=a(14),u=a(0),d=a.n(u),b=a(16),h=a(35),p=a(19),C=a.n(p),f=a(747),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).closeDelete=function(e,t){a.setState({open:!1},function(){a.props.confirmDelete(e,t,a.props.index)})},a.showModal=function(){a.setState({open:!0})},a.handleCancel=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.logo,n=t.name,l=t.clientId,s={backgroundImage:"url(".concat(a,")")};return d.a.createElement("div",{className:""},d.a.createElement("div",{style:s,className:"bg-image"},d.a.createElement(f.a,{visible:this.state.open,maskStyle:{backgroundColor:"rgba(0,0,0,9.5)"},onCancel:this.handleCancel,wrapClassName:"modal-wrapper message-modal",footer:[d.a.createElement("div",null,d.a.createElement("button",{type:"button",onClick:this.handleCancel,className:"red-btn delete-btn-main"},"CANCEL"),d.a.createElement("button",{type:"button",className:"red-border-btn delete-btn-main",onClick:function(){return e.closeDelete(l,n)}},"DELETE"))]},d.a.createElement("div",{className:"inner-btn"},d.a.createElement("h6",{className:"f-20 color-blue text-center"},"Delete Client?"),d.a.createElement("p",{className:"color-blue text-center"},"Are you sure you would like to delete this client? This action is permanent and cannot be un-done."))),d.a.createElement("button",{className:"clear-btn top-delete color-blue f-16",onClick:function(){return e.showModal()},type:"button"},"x")),d.a.createElement("p",{className:"text-center mt-5px mb-10"},n))}}]),t}(u.Component),g=a(348),v=a(748),w=(a(764),a(171)),N=a(347),S=function(e){var t=e.client,a=e.getClient,n=e.index;console.log("client",t);var l=Object(u.useState)(!1),s=Object(w.a)(l,2),c=s[0],r=s[1];function o(e){a(t,e,t.uid,n),r(!1)}return d.a.createElement("div",{className:"d-flex flex-column align-items-start"},d.a.createElement("button",{type:"button",onClick:function(){return r(!0)},className:"clear-btn p-0 mb-10 p-blue"},d.a.createElement("u",null,t.displayName)),d.a.createElement(N.a,{content:d.a.createElement(d.a.Fragment,null,d.a.createElement("button",{type:"button",onClick:function(){return o("password")},className:"clear-btn d-block"},"Change Password"),d.a.createElement("button",{type:"button",onClick:function(){return o("username")},className:"clear-btn d-block"},"Change Username")),trigger:"click",visible:c,onVisibleChange:function(){return r(!1)}}))},x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).confirmArchive=function(e){"true"===e.target.value&&(a.props.firebase.deleteClient(a.state.deleteClient),a.setState({clients:a.state.clients.filter(function(e,t){return t!==a.state.deleteIndex})})),a.setState({showDelete:!a.state.showDelete})},a.reactivateClient=function(e,t){a.props.firebase.reactivateClient(e),a.setState({clients:a.state.clients.filter(function(e,a){return a!==t})})},a.getClientParent=function(e,t,n){"password"===t?a.setState({chosenClient:e,passwordModal:!0}):a.setState({chosenClient:n,usernameModal:!0})},a.deleteClient=function(e,t){a.setState({deleteClient:e,deleteIndex:t})},a.submitDeletion=function(){if("DELETE"===a.state.username){var e=a.functions.httpsCallable("deleteByUid"),t={};t.uid=localStorage.getItem("tempDeleteUserId"),t.name=localStorage.getItem("tempDeleteUser"),e(t),a.setState({visible:!1,username:"",clients:a.state.clients.filter(function(e,t){return t!==parseInt(localStorage.getItem("tempIndex"))})}),g.a.success("Client deleted")}else g.a.error("Please type DELETE to delete client")},a.handleCancel=function(e){a.setState({visible:!1})},a.showModal=function(){a.setState({visible:!0})},a.confirmDeleteParent=function(e,t,n){localStorage.setItem("tempDeleteUser",t),localStorage.setItem("tempDeleteUserId",e),localStorage.setItem("tempIndex",n),a.setState({visible:!0})},a.handlePasswordCancel=function(){a.setState({passwordModal:!1})},a.onChange=function(e){a.setState(Object(l.a)({},e.target.name,e.target.value))},a.changePassword=function(e){e.preventDefault();var t=a.functions.httpsCallable("changeClientPassword"),n={};n.uid=a.state.chosenClient.uid,n.password=a.state.mainPassword,t(n),a.setState({passwordModal:!1})},a.handleUsernameCancel=function(){a.setState({usernameModal:!1})},a.changeUser=function(e){e.preventDefault();var t=a.functions.httpsCallable("changeUsername"),n={};alert(a.state.chosenClient),n.uid=a.state.chosenClient,n.username=a.state.username,n.oldUsername=a.state.chosenClient.name,t(n),a.setState({usernameModal:!1})},a.state={clients:[],visible:!1,deleteClient:"",deleteIndex:null,modalState:!1,email:"",password:"",error:null,allClients:[],chosenClient:{},passwordModal:!1,mainPassword:"",passwordTwo:"",username:""},a.reactivateClient=a.reactivateClient.bind(Object(i.a)(a)),a.deleteClient=a.deleteClient.bind(Object(i.a)(a)),a.confirmArchive=a.confirmArchive.bind(Object(i.a)(a)),a.auth=C.a.auth(),a.functions=C.a.functions(),a.db=C.a.firestore(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.functions.httpsCallable("GetAuthUsers")().then(function(t){e.setState({allClients:t.data.users})}),this.props.firebase.getArchivedClients().then(function(t){var a=Object(n.a)(e.state.clients);t.docs.filter(function(t){return a.push(t.data()),e.setState({clients:a})})})}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(f.a,{visible:this.state.usernameModal,onCancel:this.handleUsernameCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},d.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),d.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),d.a.createElement(v.a,{name:"username",value:this.state.username,onChange:this.onChange,type:"text",placeholder:"New Username",className:"mb-10 blue-input m-320"}),d.a.createElement("button",{type:"button",className:"mt-20",onClick:this.changeUser},"Change Username")),d.a.createElement(f.a,{visible:this.state.passwordModal,onCancel:this.handlePasswordCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},d.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),d.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),d.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.email),d.a.createElement(v.a,{name:"mainPassword",value:this.state.mainPassword,onChange:this.onChange,type:"text",placeholder:"PASSWORD",className:"mb-10 blue-input m-320"}),d.a.createElement(v.a,{name:"passwordTwo",value:this.state.passwordTwo,onChange:this.onChange,type:"text",placeholder:"VERIFY PASSWORD",className:"mb-10 blue-input m-320"}),d.a.createElement("button",{type:"button",onClick:this.changePassword},"Change Password")),d.a.createElement(f.a,{visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,wrapClassName:"message-modal",footer:[d.a.createElement("div",null,d.a.createElement("button",{type:"button",onClick:this.handleCancel,className:"red-btn delete-btn-main"},"CANCEL"),d.a.createElement("button",{type:"button",className:"red-border-btn delete-btn-main",onClick:this.submitDeletion},"DELETE"))]},d.a.createElement("div",null,d.a.createElement("h6",{className:"f-20 color-blue text-center"},"Delete Client?"),d.a.createElement("p",{className:"color-blue text-center"},"To delete this client permanently please enter 'DELETE'"),localStorage.getItem("tempDeleteUser"),d.a.createElement(v.a,{name:"username",value:this.state.username,onChange:this.onChange,type:"text",className:"mb-10 blue-input m-320"}),this.state.error&&d.a.createElement("span",{className:"color-red"},this.state.error))),d.a.createElement("h4",{className:"text-center f-20 mb-20 p-blue mt-35"},"Settings"),d.a.createElement("div",{className:"row container mx-auto"},d.a.createElement("div",{className:"col-md-12"},d.a.createElement("h2",{className:"p-blue"},"Edit Client Info"),d.a.createElement("p",{className:"p-blue"},"Select a client below to re-set their username and/or password."),this.state.allClients.map(function(t,a){return d.a.createElement(S,{client:t,getClient:e.getClientParent,key:a,index:a,className:"col-md-6"})}))),d.a.createElement("h4",{className:"text-center f-20 mb-20 mt-35"},"Archived Clients"),d.a.createElement("div",{className:"row container mx-auto settings-client"},this.state.clients.map(function(t,a){return d.a.createElement("div",{className:"col-sm-3",key:a},d.a.createElement(E,{name:t.name,logo:t.logo,clientId:t.uid,modalState:e.state.modalState,className:"w-100",confirmDelete:e.confirmDeleteParent,index:a}),d.a.createElement("button",{onClick:function(){return e.reactivateClient(t.name,a)},className:"clear-btn text-center color-blue w-100",type:"button"},d.a.createElement("u",null,"Reactivate Client")))})))}}]),t}(u.Component);t.default=Object(h.a)(Object(b.c)(x))}}]);
//# sourceMappingURL=10.d376855d.chunk.js.map