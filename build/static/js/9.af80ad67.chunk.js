(this["webpackJsonpskylar-social"]=this["webpackJsonpskylar-social"]||[]).push([[9],{742:function(e,t,a){},752:function(e,t,a){"use strict";a.r(t);var n=a(24),l=a(71),s=a(9),c=a(10),r=a(29),i=a(12),o=a(11),u=a(0),m=a.n(u),d=a(14),h=a(34),b=a(17),p=a.n(b),C=a(728),f=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).showModal=function(){n.setState({open:!0})},n.handleCancel=function(){n.setState({open:!1})},n.state={open:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.logo,a=e.name,n=(e.clientId,{backgroundImage:"url(".concat(t,")")});return m.a.createElement("div",{className:""},m.a.createElement("div",{style:n,className:"bg-image"},m.a.createElement(C.a,{visible:this.state.open,maskStyle:{backgroundColor:"rgba(0,0,0,9.5)"},onCancel:this.handleCancel,wrapClassName:"modal-wrapper message-modal",footer:[m.a.createElement("div",null,m.a.createElement("button",{type:"button",onClick:this.handleCancel,className:"red-btn delete-btn-main"},"CANCEL"),m.a.createElement("button",{type:"button",className:"red-border-btn delete-btn-main"},"DELETE"))]},m.a.createElement("div",{className:"inner-btn"},m.a.createElement("h6",{className:"f-20 color-blue text-center"},"Delete Client?"),m.a.createElement("p",{className:"color-blue text-center"},"Are you sure you would like to delete this client? This action is permanent and cannot be un-done.")))),m.a.createElement("p",{className:"text-center mt-5px mb-10"},a))}}]),a}(u.Component),v=a(340),g=a(729),E=a(726),w=(a(742),a(171)),N=a(339),S=function(e){var t=e.client,a=e.getClient,n=e.index,l=Object(u.useState)(!1),s=Object(w.a)(l,2),c=s[0],r=s[1];function i(e){a(t,e,n),r(!1)}return m.a.createElement("div",{className:"d-flex flex-column align-items-start"},m.a.createElement("button",{type:"button",onClick:function(){return r(!0)},className:"clear-btn p-0 mb-10 p-blue"},m.a.createElement("u",null,t.displayName)),m.a.createElement(N.a,{content:m.a.createElement(m.a.Fragment,null,m.a.createElement("button",{type:"button",onClick:function(){return i("delete")},className:"clear-btn d-block"},"Delete User"),m.a.createElement("button",{type:"button",onClick:function(){return i("username")},className:"clear-btn d-block"},"Change Username"),m.a.createElement("button",{type:"button",onClick:function(){return i("password")},className:"clear-btn d-block"},"Change Password")),trigger:"click",visible:c,onVisibleChange:function(){return r(!1)}}))},y=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).confirmArchive=function(e){"true"===e.target.value&&(n.props.firebase.deleteClient(n.state.deleteClient),n.setState({clients:n.state.clients.filter((function(e,t){return t!==n.state.deleteIndex}))}))},n.reactivateClient=function(e,t){n.props.firebase.reactivateClient(e),n.setState({clients:n.state.clients.filter((function(e,a){return a!==t}))})},n.getClientParent=function(e,t,a){switch(t){case"delete":var l=n.functions.httpsCallable("deleteByUid"),s={};s.uid=e.uid,s.name=e.displayName,l(s),n.props.firebase.deleteClient(e.displayName).then((function(){n.setState({allClients:n.state.allClients.filter((function(e,t){return t!==a})),clients:n.state.clients.filter((function(t){return console.log("filter",t),t.name!==e.displayName&&!0===t.Archived}))}),v.a.success("Successfully Deleted Client"),n.getArchivedClients()}));break;case"username":n.setState({chosenClient:e,usernameModal:!0});break;case"password":n.setState({chosenClient:e,passwordModal:!0})}},n.deleteClient=function(e,t){n.setState({deleteClient:e,deleteIndex:t})},n.handleCancel=function(e){n.setState({visible:!1})},n.showModal=function(){n.setState({visible:!0})},n.confirmDeleteParent=function(e,t,a){localStorage.setItem("tempDeleteUser",t),localStorage.setItem("tempDeleteUserId",e),localStorage.setItem("tempIndex",a),n.setState({visible:!0})},n.handlePasswordCancel=function(){n.setState({passwordModal:!1})},n.onChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.changePassword=function(e){e.preventDefault();var t=n.functions.httpsCallable("changeClientPassword"),a={};a.uid=n.state.chosenClient,a.password=n.state.mainPassword,t(a),n.setState({passwordModal:!1})},n.handleUsernameCancel=function(){n.setState({usernameModal:!1})},n.changeUser=function(e){e.preventDefault();var t=n.functions.httpsCallable("changeUsername"),a={};a.uid=n.state.chosenClient.uid,a.username=n.state.username,a.oldUsername=n.state.chosenClient.displayName,t(a).then((function(){n.setState({usernameModal:!1,allClients:[]},(function(){n.functions.httpsCallable("GetAuthUsers")().then((function(e){n.setState({allClients:e.data.users})}))})),v.a.success("Succesfully Changed Username")}),(function(e){return e}))},n.state={clients:[],visible:!1,deleteClient:"",deleteIndex:null,modalState:!1,email:"",password:"",error:null,allClients:[],chosenClient:{},passwordModal:!1,mainPassword:"",passwordTwo:"",username:""},n.reactivateClient=n.reactivateClient.bind(Object(r.a)(n)),n.deleteClient=n.deleteClient.bind(Object(r.a)(n)),n.confirmArchive=n.confirmArchive.bind(Object(r.a)(n)),n.auth=p.a.auth(),n.functions=p.a.functions(),n.db=p.a.firestore(),n}return Object(c.a)(a,[{key:"getAuthClients",value:function(){var e=this;this.functions.httpsCallable("GetAuthUsers")().then((function(t){e.setState({allClients:t.data.users})}))}},{key:"componentDidMount",value:function(){this.getAuthClients(),this.getArchivedClients()}},{key:"getArchivedClients",value:function(){var e=this;this.props.firebase.getArchivedClients().then((function(t){var a=Object(n.a)(e.state.clients);t.docs.filter((function(t){return console.log("item data",t.data()),a.push(t.data()),e.setState({clients:a})}))}))}},{key:"render",value:function(){var e=this,t=""===this.state.chosenClient.name;return m.a.createElement("div",null,m.a.createElement(C.a,{visible:this.state.usernameModal,onCancel:this.handleUsernameCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},m.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),m.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),m.a.createElement(g.a,{name:"username",value:this.state.username,onChange:this.onChange,type:"text",placeholder:"New Username",className:"mb-10 blue-input m-320"}),m.a.createElement("button",{type:"button",className:"mt-20",onClick:this.changeUser,disabled:t},"Change Username")),m.a.createElement(C.a,{visible:this.state.passwordModal,onCancel:this.handlePasswordCancel,footer:null,wrapClassName:"modal-wrapper message-modal"},m.a.createElement("h2",{className:"p-blue f-20 text-center"},"Change Password"),m.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.name),m.a.createElement("p",{className:"text-center p-blue"},this.state.chosenClient.email),m.a.createElement(g.a,{name:"mainPassword",value:this.state.mainPassword,onChange:this.onChange,type:"text",placeholder:"PASSWORD",className:"mb-10 blue-input m-320"}),m.a.createElement(g.a,{name:"passwordTwo",value:this.state.passwordTwo,onChange:this.onChange,type:"text",placeholder:"VERIFY PASSWORD",className:"mb-10 blue-input m-320"}),m.a.createElement("button",{type:"button",onClick:this.changePassword},"Change Password")),m.a.createElement("h4",{className:"text-center f-20 mb-20 p-blue mt-35"},"Settings"),m.a.createElement("div",{className:"row container mx-auto"},m.a.createElement("div",{className:"col-md-12"},m.a.createElement("h2",{className:"p-blue"},"Edit Client Info"),m.a.createElement("p",{className:"p-blue"},"Select a client below to re-set their username and/or password."),this.state.allClients.length>0?this.state.allClients.map((function(t,a){return m.a.createElement(S,{client:t,getClient:e.getClientParent,key:a,index:a,className:"col-md-6"})})):m.a.createElement("div",{className:"mt-20 text-center"},m.a.createElement(E.a,{size:"large"})))),m.a.createElement("h4",{className:"text-center f-20 mb-20 mt-35"},"Archived Clients"),m.a.createElement("div",{className:"row container mx-auto settings-client"},this.state.clients.map((function(t,a){return m.a.createElement("div",{className:"col-sm-3",key:a},m.a.createElement(f,{name:t.name,logo:t.logo,clientId:t.uid,modalState:e.state.modalState,className:"w-100",index:a}),m.a.createElement("button",{onClick:function(){return e.reactivateClient(t.name,a)},className:"clear-btn text-center color-blue w-100",type:"button"},m.a.createElement("u",null,"Reactivate Client")))}))))}}]),a}(u.Component);t.default=Object(h.a)(Object(d.c)(y))}}]);
//# sourceMappingURL=9.af80ad67.chunk.js.map